---
title: Windows中mklink 命令使用：创建文件和目录链接的终极指南
published: 2025-01-07
description: 详细介绍Windows中mklink命令的用法，帮助用户轻松创建符号链接、硬链接和目录联接，实现跨磁盘和目录管理。
tags:
  - CLI
category: 工具
draft: false
---
## 1 什么是 `mklink` ？  
`mklink` 是 Windows 命令行中的一个工具，用于创建**符号链接**、**硬链接**或**目录联接**。它可以让一个文件或目录成为另一个位置的“快捷入口”，从而实现跨目录、跨磁盘管理和资源共享。  

**应用场景：**  
- 在不同磁盘之间重定向存储路径，解决磁盘空间不足问题。  
- 共享同一资源文件夹，减少重复文件占用。  
- 为开发环境配置动态路径切换，便于管理版本和依赖库。  
## 2 `mklink` 命令语法
```cmd
mklink [选项] <链接名称> <目标路径>
```

| **选项**  | **说明**                                                                         |
|-----------|----------------------------------------------------------------------------------|
| `/D`      | 创建**符号链接**，指向目录（适合跨磁盘路径）。                                   |
| `/H`      | 创建**硬链接**，指向文件（必须在同一磁盘上）。                                   |
| `/J`      | 创建**目录联接**（Junction），只能用于目录，适合本地目录指向。                    |
| （无选项）| 默认创建**符号链接**，指向文件（适合跨磁盘路径）。                               |

注意：
1. `/D`会在目标位置创建一个虚拟目录（文件夹），但它不是实际的物理目录。
2. 在`mklnk`是cmd.exe内置的程序，也就只有命令行窗口可以用。

## 3 常见用法  
```cmd
# 文件符号链接：程序访问 C:\Link.txt 时，实际操作的是 D:\Target.txt 的内容
mklink C:\Link.txt D:\Target.txt

# 目录符号链接：访问 C:\LinkFolder 等效于直接操作 D:\TargetFolder。
mklink /D C:\LinkFolder D:\TargetFolder

# 目录联接（Junction）：仅适用于本地路径，不支持跨磁盘或网络路径，但兼容旧程序。
mklink /J C:\Projects E:\Workspace\Projects

# 文件硬链接：硬链接共享同一数据块，删除任意一个都会影响另一个。
mklink /H C:\Link.txt D:\Target.txt
```
## 4 删除链接 
```cmd
# 删除目录连接点：注意只删除连接点（该文件目录），不影响目标目录或文件内容！
rmdir C:\LinkFolder

# 删除硬链接：硬链接删除会影响实际数据，需要谨慎操作！  
del C:\Link.txt
```
## 5 注意事项

1. **管理员权限：**  
   执行 `mklink` 需要管理员权限运行命令提示符。  
2. **兼容性：**  
   - 符号链接（`/D`）支持跨磁盘和网络路径。  
   - 目录联接（`/J`）只能在本地磁盘上使用，兼容旧版程序。  
   - 硬链接（`/H`）仅适用于同一磁盘，并直接共享物理数据块。  
3. **删除操作安全性：**  
   - 删除连接点不会影响目标路径，但删除硬链接可能会导致数据丢失。  
